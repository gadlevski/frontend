name: linting, testing, buildings
run-name: ${{ github.actor }} is testing out GitHub Actions
on: 
  push:
    branches: [master, fix_ui_test]
  pull_request:
    branches: [master]
jobs:
  Pipline:
    runs-on: ubuntu-20.04
    strategy:
      matrix: 
        node-version: [ 16.18.1 ]
    steps:
      - uses: actions/checkout@v2

      - name: Starting NodeJS ${{ matrix.node-version }}
        uses: actions/setup-node@v1
        with: 
          node-version: ${{ matrix.node-version }}

      - name: Install Dependencies
        run: npm install

      - name: Build production project
        if: always()
        run: npm run build:prod

      - name: Linting typescript with Eslint
        if: always()
        run: npm run lint:ts
        
      - name: Linting scss with Stylelint
        if: always()
        run: npm run lint:scss

      - name: Unit testing with Jest
        if: always()
        run: npm run t:unit
            
      #- name: Generate current UI test screenshots
      #  run: npm run cur

      #- name: Compare UI test screenshots with reference
      #  run: npm run t:ui

      #- name: Upload artifacts
      #  uses: actions/upload-artifact@v2
      #  if: always()
      #  with:
      #    name: test-artifacts
      #    path: |
      #      report.html
      #      report.json
      #      __screenshots__/**/*